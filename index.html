<!DOCTYPE html>
<html>
<body>

<h1>Meta</h1>


<script>

var testCase = { 
	x: 1, 
	y: 3, 
	name: "foo"
};
var testCase2 = { 
	id: 0
};


var CommandCapture = function(){

	this.captures = [];
	var commands = ["find", "findOne", "orderBy", "limit"];

	for (var i = 0; i < commands.length; i++) {
		this[commands[i]] = function(name){

			return function(){
				this.captures.push({ name: name, args: arguments});
				return this;
			};
		}(commands[i]);
	}
};

var creator = new CommandCapture();
var result = creator.find(testCase, testCase2).limit(1);
console.log(result);


</script>

</body>
</html> 